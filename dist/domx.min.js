/*! domx - v0.1.0 - 2014-05-01
* http://nbubna.github.io/domx/
* Copyright (c) 2014 ESHA Research; Licensed MIT, GPL */
!function(a){"use strict";function b(a){"number"==typeof a?(this.limit=a,this.add(c.slice(arguments,1))):this.add(arguments)}var c={version:"0.1.0",slice:Array.prototype.slice,noop:function(){},List:b,singles:[Element],lists:[NodeList,HTMLCollection,b],isList:function(a){return a&&"object"==typeof a&&"length"in a||a instanceof NodeList||a instanceof HTMLCollection},fn:function(a,b,d){if("string"!=typeof a){var e=a;for(a in e)c.fn(a,e[a],b||d);return e}if(d)for(var f=0,g=d.length;g>f;f++)c.define(d[f].prototype||d[f],a,b);else c.fn(a,b,c.singles),c.fn(a,b,c.lists)},define:function(a,b,c){if(!(b in a))try{var d=c.get||c.set?c:{value:c,writable:!0};d.configurable=!0,Object.defineProperty(a,b,d)}catch(e){}},resolve:function(a,b,d,e){var f=a,g=b;if(d=d.length?c.fill(d,e,g):null,f.indexOf(".")>0){for(var h=f.split(".");h.length>1&&(g=g[f=h.shift()]););g=g||b,f=g?h[0]:a}var i=g[f];if(void 0!==i){if("function"==typeof i)return i.apply(g,d);if(!d)return i;g[f]=d[0]}else{if(!d)return b.getAttribute(a);null===d[0]?b.removeAttribute(a):b.setAttribute(a,d[0])}},fill:function(a,b,c){for(var d=[],e=0,f=a.length;f>e;e++){var g=a[e],h=typeof g;d[e]="string"===h?g.replace(/\$\{i\}/g,b):"function"===h?g(c,b,a):g}return d}};c.core={each:function(a){var b,d,e=c.isList(this)?this:[this],f=[];"string"==typeof a&&(b=c.resolve[a]||a,d=c.slice.call(arguments,1),a=function(a,e){return c.resolve(b,a,d,e)});for(var g,h=0,i=e.length;i>h;h++)g=a.call(e,e[h],h,e),(g||b&&void 0!==g)&&f.push(g);return f.length?c.isList(this)?f[0]instanceof Node?new c.List(f):f:f[0]:this},toArray:function(a){if(a=a||[],c.isList(this))for(var b=0,d=this.length;d>b;b++)a.push(this[b]);else a.push(this);return a}},c.fn({length:0,limit:-1,add:function(a){a=arguments.length<2&&c.isList(a)?a:arguments;for(var b=0,d=a.length;d>b;b++){var e=a[b];if(c.isList(e))this.add(e);else if(null!==e&&void 0!==e&&this.indexOf(e)<0&&(this[this.length++]=e,this.length===this.limit))return c.define(this,"add",c.noop)}},indexOf:function(a){for(var b=0;b<this.length;b++)if(a===this[b])return b;return-1}},[b]),c.define(a,"_",c),c.fn(c.core)}(document),function(a){"use strict";var b=a._;b.traverse={queryAll:function(a,c){for(var d=b.isList(this)?this:[this],e=new b.List(c),f=0,g=d.length;g>f&&(!c||c>e.length);f++)e.add(d[f][c===e.length+1?"querySelector":"querySelectorAll"](a));return e},query:function(a){return this.queryAll(a,1)[0]},only:function(a,c){var d=this.toArray();return new b.List(a>=0||0>a?d.slice(a,c||a+1||void 0):d.filter("function"==typeof a?a:function(b){return b.matches(a)}))}},b.define(a,"queryAll",b.traverse.queryAll),b.define(a,"query",b.traverse.query),b.fn("queryAll",b.traverse.queryAll),b.fn("query",b.traverse.query),b.fn("only",b.traverse.only,b.lists);var c=Element.prototype,d="atchesSelector";b.define(c,"matches",c.m||c["webkitM"+d]||c["mozM"+d]||c["msM"+d])}(document),function(a){"use strict";var b=a._,c=b.add={fn:function(a,d){return b.isList(this)?this.each(function(b){return c.all(b,a,d)}):c.all(this,a,d)},all:function(a,d,e){if("string"==typeof d)return c.create(a,d,e);if(b.isList(d)){for(var f=new b.List,g=0,h=d.length;h>g;g++)f.add(c.all(a,d[g],e));return f}return c.insert(a,d,e),d},create:function(b,d,e){return c.insert(b,a.createElement(d),e)},insert:function(a,b,d){var e=c.find(a,d);return e?a.insertBefore(b,e):a.appendChild(b),b},find:function(a,b){switch(typeof b){case"string":return a[b+"Child"];case"number":return a.children[b];case"object":return b;case"function":return b.call(a,a)}}};b.fn("add",c.fn),b.fn("remove",function(a){return this.each(function(b){var c=b.parentNode;return c&&(c.removeChild(b),a)?c:void 0})})}(document),function(a){"use strict";var b=a._,c=b.add;c.create=function(b,d,e){var f=d.split(c.emmetRE()),g=a.createDocumentFragment(),h=a.createElement(f[0]);g.appendChild(h);for(var i=1,j=f.length;j>i;i++){var k=f[i];h=c.emmet[k.charAt(0)].call(h,k.substr(1),g)||h}return c.insert(b,g,e),h},c.emmetRE=function(){var a="\\"+Object.keys(c.emmet).join("|\\");return new RegExp("(?="+a+")","g")},c.emmet={"#":function(a){this.id=a},".":function(a){var b=this.getAttribute("class")||"";b=b+(b?" ":"")+a,this.setAttribute("class",b)},"[":function(a){a=a.substr(0,a.length-1).match(/(?:[^\s"]+|"[^"]*")+/g);for(var b=0,c=a.length;c>b;b++){var d=a[b].split("=");this.setAttribute(d[0],(d[1]||"").replace(/"/g,""))}},">":function(b){if(b){var c=a.createElement(b);return this.appendChild(c),c}return this},"+":function(a,b){return c.emmet[">"].call(this.parentNode||b,a)},"*":function(a){for(var c=this.parentNode,d=new b.List(this),e=1;a>e;e++)d.add(this.cloneNode(!0)),c.appendChild(d[e]);return d},"^":function(a,b){return c.emmet["+"].call(this.parentNode||b,a,b)},"{":function(b){this.appendChild(a.createTextNode(b.substr(0,b.length-1)))}}}(document);