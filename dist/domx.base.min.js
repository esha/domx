/*! domx - v0.1.0 - 2014-03-11
* http://nbubna.github.io/domx/
* Copyright (c) 2014 ESHA Research; Licensed MIT, GPL */
!function(a,b,c){"use strict";var d={version:"0.1.0",slice:Array.prototype.slice,list:function(a,b){return 1===a.length?d.node(a[0],b):((b||!a.each)&&(a.slice||(a=d.slice.call(a)),d.methods(a),a.length&&d.children(a[0],a)),a)},node:function(a,b){return(b||!a.each)&&(d.methods(a),d.children(a)),a},methods:function(a){for(var b in d.fn)d.define(a,b,d.fn[b])},children:function(a,b){for(var c=a._children={},e=0,f=a.childNodes.length;f>e;e++){var g=a.childNodes[e],h=d.key(g);(c[h]||(c[h]=[])).push(g),d.define(a,h),b&&d.define(b,h,void 0,a)}return c},key:function(a){return a.tagName?a.tagName.toLowerCase():"_other"},define:function(a,b,c,e){if(!(b in a))try{e=e||a,Object.defineProperty(a,b,void 0!==c?{value:c}:{get:function(){return e._children||d.children(e),d.list(e._children[b]||[])}})}catch(f){}},mutation:function(a){var b=a.target;delete b[b._internal?"_internal":"_children"]},unique:function(a,b,c){return c.indexOf(a)===b},fn:{each:function(a){var b,c,e=this.forEach?this:[this],f=[];"string"==typeof a&&(b=d.resolve[a]||a,c=d.slice.call(arguments,1),a=function(a,e){return d.resolve(b,a,c,e)});for(var g,h=0,i=e.length;i>h;h++)g=a.call(e,d.node(e[h]),h,e),(g||b&&void 0!==g)&&(g.forEach?f.push.apply(f,g):f.push(g));return f[0]||f[0]===!1?f[0].matches?d.list(f.filter(d.unique)):f:this},find:function(){try{a.console.warn("find() is deprecated. Please use query().")}finally{return this.query.apply(this,arguments)}},query:function(a,b){for(var c=this.forEach?this:[this],e=[],f=0,g=c.length;g>f&&(!b||e.length<b);f++)if(b===e.length+1){var h=c[f].querySelector(a);h&&e.push(h)}else for(var i=c[f].querySelectorAll(a),j=0,k=i.length;k>j&&(!b||e.length<b);j++)e.push(i[j]);return d.list(e)},only:function(a,b){var c=this.forEach?this:[this];return d.list(a>=0||0>a?c.slice(a,b||a+1||void 0):c.filter("function"==typeof a?a:function(b){return b.matches(a)}))}},resolve:function(a,b,c,e){var f=a,g=b;if(c=c.length?d.fill(c,e,g):null,f.indexOf(".")>0){for(var h=f.split(".");h.length>1&&(g=g[f=h.shift()]););g=g||b,f=g?h[0]:a}var i=g[f];if(void 0!==i){if("function"==typeof i)return i.apply(g,c);if(!c)return i;g[f]=c[0]}else{if(!c)return b.getAttribute(a);null===c[0]?b.removeAttribute(a):b.setAttribute(a,c[0])}},fill:function(a,b,c){for(var d=[],e=0,f=a.length;f>e;e++){var g=a[e],h=typeof g;d[e]="string"===h?g.replace(/\$\{i\}/g,b):"function"===h?g(c,b,a):g}return d}};d.node(b),d.define(b,"_",d);var e=Element.prototype,f="atchesSelector";d.define(e,"matches",e.m||e["webkitM"+f]||e["mozM"+f]||e["msM"+f]),c?new c(function(a){a.forEach(d.mutation)}).observe(b,{childList:!0,subtree:!0}):b.addEventListener("DOMSubtreeModified",d.mutation),"function"==typeof define&&define.amd?define(function(){return b}):"undefined"!=typeof module&&module.exports?module.exports=b:a[b.html.getAttribute("data-domx-reference")||"D"]=b,b.addEventListener("DOMContentLoaded",function(){d.node(b,!0)})}(window,document,window.MutationObserver),function(a,b){"use strict";var c=b.fn.add=function(a,b){return this.each(function(d){return c.all(d,a,b)})};c.all=function(a,b,d){if("string"==typeof b)return c.create(a,b,d);if("length"in b){for(var e=[],f=0,g=b.length;g>f;f++)e.push(c.all(a,b[f],d));return e}return c.insert(a,b,d),b},c.create=function(b,d,e){return c.insert(b,a.createElement(d),e)},c.insert=function(a,d,e){var f=c.find(a,e);return f?a.insertBefore(d,f):a.appendChild(d),b.updated(a),d},c.find=function(a,b){switch(typeof b){case"string":return a[b+"Child"];case"number":return a.children[b];case"object":return b;case"function":return b.call(a,a)}},b.updated=function(a){a._internal=!0,b.children(a)},b.fn.remove=function(a){return this.each(function(c){var d=c.parentNode;return d&&(d.removeChild(c),b.updated(d),a)?d:void 0})}}(document,document._),function(a,b){"use strict";var c=b.fn.event=function(){var a,d=b.slice.call(arguments),e=this,f=[];return d[0]?!d[1]||d[1].forEach?a="trigger":(a="on",1===d[0]&&(d[4]=d.shift()),(!d[2]||d[2].forEach)&&(d.splice(1,0,!1),d.splice(4,1)),d[3]=(d[3]||[]).slice(0),"string"==typeof d[2]&&(d[5]=d[2],d[3].unshift(d[2]),d[2]=b.fn.each)):(a="off",d.shift(),"function"==typeof d[1]&&d.splice(1,0,!1)),(d[0]||"").split(" ").forEach(function(b){d[0]=b,e.each(function(b){f.push(c[a].apply(b,d))})}),"trigger"===a?1===f.length?f[0]:f:this},d=Array.prototype.concat;c.on=function(a,d,e,f,g,h){var i=function(a){c.heard.call(this,a,d,e,f,g,h)};this.addEventListener(a,i),b.define(this,"_evt",[]),this._evt.push([a,d,h||e,i])},c.off=function(a,b,c){if(this._evt)for(var d=0;d<this._evt.length;d++){var e=this._evt[d];a&&e[0]!==a||b&&e[1]!==b||c&&e[2]!==c||(this.removeEventListener(e[0],e[3]),this._evt.splice(d--,1))}else this.removeEventListener(a,c)},c.trigger=function(b,c){var d=a.createEvent("HTMLEvents");return d.initEvent(b,!0,!0),c&&(d.data=c),this.dispatchEvent(d),d},c.heard=function(a,e,f,g,h,i){var j=e?c.closest.call(a,e):this;if(j){var k=[a];a.data&&k.push(a.data),g&&k.unshift(g),b.node(a.target),b.define(a,"closest",c.closest),h&&c.off.call(this,a.type,e,i||f),f.apply(j,d.apply([],k))}},c.closest=function(a){for(var c=this.target;c&&c.matches;){if(c.matches(a))return b.node(c);c=c.parentNode}}}(document,document._);