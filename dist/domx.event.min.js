/*! domx - v0.1.0 - 2014-03-11
* http://nbubna.github.io/domx/
* Copyright (c) 2014 ESHA Research; Licensed MIT, GPL */
!function(a,b){"use strict";var c=b.fn.event=function(){var a,d=b.slice.call(arguments),e=this,f=[];return d[0]?!d[1]||d[1].forEach?a="trigger":(a="on",1===d[0]&&(d[4]=d.shift()),(!d[2]||d[2].forEach)&&(d.splice(1,0,!1),d.splice(4,1)),d[3]=(d[3]||[]).slice(0),"string"==typeof d[2]&&(d[5]=d[2],d[3].unshift(d[2]),d[2]=b.fn.each)):(a="off",d.shift(),"function"==typeof d[1]&&d.splice(1,0,!1)),(d[0]||"").split(" ").forEach(function(b){d[0]=b,e.each(function(b){f.push(c[a].apply(b,d))})}),"trigger"===a?1===f.length?f[0]:f:this},d=Array.prototype.concat;c.on=function(a,d,e,f,g,h){var i=function(a){c.heard.call(this,a,d,e,f,g,h)};this.addEventListener(a,i),b.define(this,"_evt",[]),this._evt.push([a,d,h||e,i])},c.off=function(a,b,c){if(this._evt)for(var d=0;d<this._evt.length;d++){var e=this._evt[d];a&&e[0]!==a||b&&e[1]!==b||c&&e[2]!==c||(this.removeEventListener(e[0],e[3]),this._evt.splice(d--,1))}else this.removeEventListener(a,c)},c.trigger=function(b,c){var d=a.createEvent("HTMLEvents");return d.initEvent(b,!0,!0),c&&(d.data=c),this.dispatchEvent(d),d},c.heard=function(a,e,f,g,h,i){var j=e?c.closest.call(a,e):this;if(j){var k=[a];a.data&&k.push(a.data),g&&k.unshift(g),b.node(a.target),b.define(a,"closest",c.closest),h&&c.off.call(this,a.type,e,i||f),f.apply(j,d.apply([],k))}},c.closest=function(a){for(var c=this.target;c&&c.matches;){if(c.matches(a))return b.node(c);c=c.parentNode}}}(document,document._);