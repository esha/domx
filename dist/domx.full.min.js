/*! domx - v0.17.1 - 2017-03-29
* http://esha.github.io/domx/
* Copyright (c) 2017 ESHA Research; Licensed ,  */
!function(a,b,c){"use strict";c={slice:Array.prototype.slice,zero:function(){return 0},isList:function(a){return a&&"object"==typeof a&&"length"in a&&!a.nodeType||a instanceof NodeList||a instanceof HTMLCollection},define:function(a,b,d,e){if("string"==typeof b)for(var f=0,g=a.length;f<g;f++)c.defprop(a[f].prototype||a[f],b,d,e);else for(var h in b)c.define(a,h,b[h],d)},defprop:function(a,b,c,d){if(d||!(b in a))try{var e=c.get||c.set?c:{value:c,writable:!0};e.configurable=!0,Object.defineProperty(a,b,e)}catch(a){}},resolve:function(a,b,d,e){var f=a,g=b;if(d=d.length?c.fill(d,e,g):null,f.indexOf(".")>0){for(var h=f.split(".");h.length>1&&(g=g[f=h.shift()]););void 0===g?(g=b,f=a):f=h[0]}var i=g[f];if(void 0!==i){if("function"==typeof i&&i.apply)return i.apply(g,d);if(!d)return i;g[f]=d[0]}else if(1===b.nodeType){if(!d)return b.getAttribute(a);null===d[0]?b.removeAttribute(a):b.setAttribute(a,d[0])}},fill:function(a,b,c){for(var d=[],e=0,f=a.length;e<f;e++){var g=a[e],h=typeof g;d[e]="string"===h?g.replace(/\$\{i\}/g,b):"function"===h?g(c,b,a):g}return d},alias:{}},b={version:"0.17.1",_:c,alias:function(a,b){if("object"==typeof a)for(var d in a)c.alias[d]=a[d]+"";else c.alias[a]=b+""},add:function(a,d,e,f){Array.isArray(e)||(f=e,e=b.nodes),c.define(e,a,d,f),"function"==typeof d&&c.define(b.lists,a,function(){var a=arguments;return this.each(function(){return d.apply(this,a)})},f)},nodes:[Element,Text,Comment],parents:[Element,DocumentFragment,a]},b.List=function(a){"number"==typeof a?(this.limit=a,this.add(c.slice(arguments,1))):this.add(arguments)},c.define([b.List],{length:0,limit:void 0,add:function(a){var b=this.length;if(arguments.length>1||c.isList(a))for(var d=arguments.length>1?arguments:a,e=0,f=d.length;e<f;e++)this.add(d[e]);else null!==a&&void 0!==a&&this.indexOf(a)<0&&(this[this.length++]=a,this.length===this.limit&&(this.add=c.zero));return this.length-b},isFull:function(){return this.add===c.zero},indexOf:function(a){for(var b=0;b<this.length;b++)if(a===this[b])return b;return-1}}),b.lists=[NodeList,HTMLCollection,b.List],b.containers=b.parents.concat(b.lists),c.defprop(a,"x",b),c.define([Node].concat(b.lists),{each:function(a){var d,e,f=c.isList(this)?this:[this],g=[];"string"==typeof a&&(d=c.alias[a]||a,e=c.slice.call(arguments,1),a=function(a,b){return c.resolve(d,a,e,b)});for(var h,i=0,j=f.length;i<j;i++)((h=a.call(f[i],f[i],i,f))||d&&void 0!==h)&&g.push(h);return g.length?c.isList(this)?g[0]&&g[0].each?new b.List(g):g:g[0]:this},toArray:function(a){if(a=a||[],c.isList(this))for(var b=0,d=this.length;b<d;b++)a.push(this[b]);else a.push(this);return a}}),c.define(b.containers,{queryAll:function(a,d){for(var e=c.isList(this)?this:[this],f=new b.List(d),g=0,h=e.length;g<h&&(!d||d>f.length);g++)f.add(e[g][d===f.length+1?"querySelector":"querySelectorAll"](a));return f},query:function(a){return this.queryAll(a,1)[0]}}),c.define(b.lists,{only:function(a,c){var d=this.toArray();return d=a>=0||a<0?d.slice(a,c||a+1||void 0):d.filter("function"==typeof a?a:1===arguments.length?function(b){return b[b.matches?"matches":"hasOwnProperty"](a)}:function(b){return(b.each?b.each(a):b[a])===c}),new b.List(d)},not:function(a){var b=a instanceof Node?[a]:this.only.apply(this,arguments);return this.only(function(a){return b.indexOf(a)<0})}}),c.estFnArgs=function(a,b,d,e){if(b=c.alias[b]||b,b in a||(e=void 0===d?"boolean"!=typeof b||b:d,d=b,b="parentElement"),"boolean"==typeof d&&(e=d,d=null),d){if("string"==typeof d){var f=d;d=function(a){return a.matches&&a.matches(f)}}}else d=function(){return!0};return[b,d,e||!1]},c.define(b.nodes,"farthest",function(a,b,d){var e=c.estFnArgs(this,a,b,d);return c.farthest(this,e[0],e[1],e[2]&&e[1](this)?this:null)}),c.farthest=function(a,b,d,e){return a&&(a=a[b])?c.farthest(a,b,d,d(a)?a:e):e},c.define(b.nodes,"nearest",function(a,b,d){var e=c.estFnArgs(this,a,b,d);return e[2]&&e[1](this)?this:c.nearest(this,e[0],e[1])}),c.nearest=function(a,b,d){return a&&(a=a[b])?d(a)?a:c.nearest(a,b,d):null},c.define(b.nodes,"closest",function(a){return this.nearest(a?a+"":"*",!0)}),b.add("all",function(a,d,e,f){d===!0&&(e=d,d=void 0),f=f||new b.List;var g=e?this:this[c.alias[a]||a];if(g){var h=d&&d.call(this,g,f);null!==h&&f.add(h||g),!g.all||!g.length&&c.isList(g)||g.all(a,d,!1,f)}return f},[Node]);var d=Element.prototype,e="atchesSelector";c.defprop(d,"matches",d.m||d["webkitM"+e]||d["mozM"+e]||d["msM"+e]);var f=c.insert={create:function(b,c,d){return f.insert(b,a.createElement(c),d)},insert:function(a,b,c){var d=f.find(a,c);return d?a.insertBefore(b,d):a.appendChild(b),b},find:function(a,b){switch(typeof b){case"string":return a[b]||a.only(b);case"number":return a.children[b];case"object":return b;case"function":return b.call(a,a)}}};b.add("insert",function(a,d){if("string"==typeof a)return f.create(this,a,d);if(c.isList(a)){for(var e=new b.List,g=0,h=a.length;g<h;g++)e.add(this.insert(a[g],d));return e}return f.insert(this,a,d),a},b.parents),b.add("remove",function(){var a=this.parentNode;a&&a.removeChild(this)});var g=c.insert;g.create=function(b,c,d){var e=c.split(g.emmetRE()),f=a.createDocumentFragment(),h=a.createElement(e[0]);f.appendChild(h);for(var i=1,j=e.length;i<j;i++){var k=e[i],l=k.charAt(0),m=g.emmet.groups[l];if(m){for(;m!==k[k.length-1]||"\\"===k[k.length-2];)k+=e[++i]||m;k=k.replace(new RegExp("\\\\"+m,"g"),m)}h=g.emmet[l].call(h,k.substr(1),f)||h}return g.insert(b,f,d),h},g.emmetRE=function(){var a="\\"+Object.keys(g.emmet).join("|\\");return new RegExp("(?="+a+")","g")},g.emmet={"#":function(a){this.id=a},".":function(a){var b=this.getAttribute("class")||"";b=b+(b?" ":"")+a,this.setAttribute("class",b)},"[":function(a){a=a.substr(0,a.length-1).match(/(?:[^\s"]+|("[^"]+"))+/g);for(var b=0,c=a.length;b<c;b++){var d=a[b].split("=");this.setAttribute(d[0],(d[1]||"").replace(/"/g,""))}},">":function(b){if(b){var c=a.createElement(b);return this.appendChild(c),c}return this},"+":function(a,b){return g.emmet[">"].call(this.parentNode||b,a)},"*":function(a){for(var c=this.parentNode,d=new b.List(this),e=1;e<a;e++)d.add(this.cloneNode(!0)),c.appendChild(d[e]);return d},"^":function(a,b){return g.emmet["+"].call(this.parentNode||b,a,b)},"{":function(b){this.appendChild(a.createTextNode(b.substr(0,b.length-1)))}},g.emmet.groups={"[":"]","{":"}"},c.defprop(a,"html",a.documentElement);var h=c.dot={names:{3:"$text",8:"$comment",7:"$procins"},fns:{},fn:function(a,b){return h.fns[b]||(h.fns[b]=1===a?function(){return this.each("children").only(b).dot()}:function(){return this.each("childNodes").only("nodeType",a)})},init:function(){a.queryAll("[x-dot]").each(function(a){a.dot(!0),i&&!a._observer&&(a._observer=new i(function(a){for(var b=0,c=a.length;b<c;b++)a[b].target.dot(!0)})).observe(a,{childList:!0,subtree:!0})})}},i=window.MutationObserver;c.define(b.containers,"dot",function(a){var b=this;return!a&&b._dotted||(b.each("childNodes").each(function(a){var d=a.nodeType,e=h.names[d]||a.tagName.toLowerCase();e in b||c.defprop(b,e,{get:h.fn(d,e)}),1===d&&a.dot()}),c.defprop(b,"_dotted",!0)),b}),h.init(),a.addEventListener("DOMContentLoaded",h.init)}(document),function(D){"use strict";var X=D.x,_=X._,V=_.xValue={resolve:function(context,reference){var full='context["'+reference+'"]';try{return eval(full+"||context."+reference)}catch(e){return eval(full)}},name:function(a){return 3!==a.nodeType||a.noSubNames||a.splitOnName(),"FORM"===a.tagName?a.getAttribute("name"):a.name},parse:function(a){if("string"==typeof a)try{a=JSON.parse(a)}catch(a){}else Array.isArray(a)&&(a=a.map(V.parse));return a},string:function(a){if(void 0!==a&&"string"!=typeof a)try{a=JSON.stringify(a)}catch(b){a+=""}return a},stringifyFor:function(a){var b=a.getAttribute("x-value-stringify");return b&&V.resolve(window,b)||V.string},nameNodes:function(a,b,c,d){for(var e=0,f=[];e<a.childNodes.length;e++){var g=a.childNodes[e],h=V.name(g);h&&f.indexOf(h)<0?(f.push(h),b(h,g)):c&&!g.useBaseValue()?c(g):g.useAttrValues&&V.nameAttrs(g,d)}a.useAttrValues&&V.nameAttrs(a,d)},nameAttrs:function(a,b){for(var c=a.getAttribute("x-value-attr").split(","),d=0;d<a.attributes.length;d++){var e=a.attributes[d];c.indexOf(e.name)>=0&&b(e)}},combine:function(a,b,c){return void 0===a||a===b||c&&null===a?b:Array.isArray(a)?(a.indexOf(b)<0&&a.push(b),a):[a,b]},getNameValue:function(a,b){return V.nameNodes(a,function(a,c){b[a]=V.combine(b[a],c.nameValue)},function(a){V.getNameValue(a,b)},function(a){b[a.name]=a.baseValue}),b},setNameValue:function(a,b){V.nameNodes(a,function(a,c){var d=V.resolve(b,a);void 0!==d&&(c.nameValue=d)},function(a){V.setNameValue(a,b)},function(a){var c=V.resolve(b,a.name);void 0!==c&&(a.baseValue=c)})},booleanAttr:function(a){return{get:function(){return this.hasAttribute(a)},set:function(b){this[b?"setAttribute":"removeAttribute"](a,!0)}}},nameRE:/\$\{([^}]+)\}/,changeEvent:window.CustomEvent?function(a){a.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}:function(a){var b=D.createEvent("CustomEvent");b.initCustomEvent("change",!0),a.dispatchEvent(b)}};_.define([Node],{value:{get:function(){return this.hasAttribute&&this.hasAttribute("value")?this.getAttribute("value"):this.textContent},set:function(a){this.hasAttribute&&this.hasAttribute("value")?this.setAttribute("value",a):this.textContent=a}},baseValue:{get:function(){return V.parse(this.value)},set:function(a){this.value!==(this.value=V.string(a))&&V.changeEvent(this)}},useBaseValue:function(){var a=this.childNodes;return!(!this.noSubNames&&a.length)||!(a.length>1||a[0].name||this.children.length)&&(!a[0].splitOnName||!a[0].splitOnName())},nameParent:{get:function(){for(var a,b=this;a=b.parentNode;){if(V.name(a)||a.hasAttribute&&a.hasAttribute("x-value-parent"))return a;b=a}return b===this?null:b}},nameGroup:{get:function(){var a=this,b=V.name(a);return b?a.parentNode?a.nameParent.queryNameAll(b):new X.List(a):null}},nameValue:{get:function(){var a;return V.name(this)&&this.nameGroup.each(function(b){a=V.combine(a,b.xValue)}),a||this.xValue},set:function(a){if(V.name(this)&&Array.isArray(a)){var b=this.nameGroup;for(_.repeat&&!a.length&&b.length&&!b[0].hasAttribute(_.repeat.id)&&_.repeat.init(b[0],!0),b.each(function(b,c){c<a.length?b.nameValue=a[c]:b.remove()});b.length<a.length;){var c=b[b.length-1];b.add(c.repeat(a[b.length]))}}else"X-REPEAT"===this.tagName?this.repeat(a):this.xValue=a}},xValue:{get:function(){return this.useBaseValue()?this.baseValue:V.getNameValue(this,{})},set:function(a){this.useBaseValue()||"object"!=typeof a?this.baseValue=a:V.setNameValue(this,a)}}}),_.define([Attr],{useBaseValue:function(){return!0}},!0),_.define([Element],{name:{get:function(){return this.getAttribute("name")},set:function(a){this.setAttribute("name",a)}},baseProperty:"value",baseValue:{get:function(){var a=this.getAttribute("x-value-parse");return a=a&&V.resolve(window,a)||V.parse,a.call(this,this[this.baseProperty])},set:function(a){this[this.baseProperty]!==(this[this.baseProperty]=V.stringifyFor(this).call(this,a))&&V.changeEvent(this)}},useAttrValues:V.booleanAttr("x-value-attr"),noSubNames:V.booleanAttr("x-value-none")},!0),_.define(X.containers,{queryName:function(a){return this.queryNameAll(a,1)[0]},queryNameAll:function(a,b,c){c=c||new X.List(b);for(var d=_.isList(this)?this:[this],e=0;e<d.length&&!c.isFull();e++){for(var f=d[e],g=null,h=0;h<f.childNodes.length&&!c.isFull();h++){var i=f.childNodes[h],j=V.name(i);j===a?"X-REPEAT"===i.tagName?g!==!1&&(g=i):(g=!1,c.add(i)):1===i.nodeType&&(j?0===a.indexOf(j+".")&&i.queryNameAll(a.substring(j.length+1),b,c):i.queryNameAll(a,b,c))}if(g&&c.add(g),f.useAttrValues&&!c.isFull()){var k=this;if(f.getAttribute("x-value-attr").split(",").indexOf(a)>=0)for(var l=0;l<k.attributes.length;l++){var m=k.attributes[l];if(m.name===a){m.parentNode||(m.parentNode=k),c.add(m);break}}}}return c}}),_.define([Text],{useBaseValue:function(){return!0},splitOnName:function(){var a=this,b=a.textContent.match(V.nameRE);if(b){var c=b.index,d=b[0];c>0&&(a.splitText(c),a.noSubNames=!0,a=a.nextSibling),a.textContent.length>d.length&&a.splitText(d.length),a.name=b[1],a.textContent=""}return a.noSubNames=!0,!!b}},!0),_.define([HTMLInputElement],{checkable:{get:function(){return"radio"===this.type||"checkbox"===this.type}},xValue:{get:function(){return!this.checkable||this.checked?this.baseValue:null},set:function(a){this.nameValue=a}},nameValue:{get:function(){if(this.checkable){var a,b=this.nameGroup||new X.List(this);return b.each(function(b){a=V.combine(a,b.xValue,!0)}),!Array.isArray(a)||"radio"!==this.type&&1!==b.length?a:a[0]}return this.baseValue},set:function(a){var b=this;if(b.checkable&&("on"!==b.value&&""!==b.value||b.hasAttribute("value"))){a=(Array.isArray(a)?a:[a]).map(V.stringifyFor(b));var c=!1;(b.nameGroup||new X.List(b)).each(function(b){var d=b.checked;b.checked=a.indexOf(b.value)>=0,d!==b.checked&&(c=!0)}),c&&V.changeEvent(b)}else b.baseValue=a}}},!0),_.define([HTMLSelectElement],{xValue:{get:function(){if(this.multiple){var a=this.children.only("selected",!0);return a.length?a.each("xValue"):this.children.length>1?[]:null}return V.parse(this.baseValue)},set:function(a){if(this.multiple){a=(Array.isArray(a)?a:[a]).map(V.string);var b=!1;this.children.each(function(c){var d=c.selected;c.selected=a.indexOf(c.value)>=0,c.select!==d&&(b=!0)}),b&&V.changeEvent(this)}else this.baseValue=a}}},!0),_.define([HTMLLIElement],{baseProperty:{get:function(){return this.parentNode instanceof HTMLOListElement?"value":"textContent"}}},!0),_.define([HTMLOptionElement],{baseProperty:{get:function(){return this.hasAttribute("value")?"value":"textContent"}}},!0)}(document),function(a){"use strict";var b=a.x,c=b._,d=c.repeat={id:"x-repeat-id",each:"x-repeat-each",context:"html,[x-repeat-init]",count:0,initAll:function(){a.queryAll(d.context).each(function(b){var c=b.getAttribute("x-repeat-init")||"DOMContentLoaded",e=function(){a.removeEventListener(c,e),b.queryAll("[x-repeat]").not("["+d.id+"]").each(d.init)};"true"!==c&&(b.setAttribute("x-repeat-init","true"),a.addEventListener(c,e))})},init:function(b,e){var f=b.getAttribute("x-repeat"),g=d.count++,h=f&&a.query(f).cloneNode(!0)||b,i=a.createElement("x-repeat");h.setAttribute(d.id,g),i.setAttribute(d.id,g);for(var j=0,k=b.attributes.length;j<k;j++){var l=b.attributes[j];"x-repeat-none"===l.name&&(i.value=l.value||b.innerHTML),i.setAttribute(l.name,l.value)}return d.parent(b).insertBefore(i,b.nextSibling),c.defprop(i,"content",d[g]=h),e!==!0&&b.remove(),g},parent:function(b){return b.parentNode||a.createDocumentFragment().appendChild(b),b.parentNode},repeat:function(a,b,e,f){var g=e.cloneNode(!0);return void 0!==f&&null!==f&&(g.xValue=f),a.insertBefore(g,b),g.hasAttribute(d.each)&&g.getAttribute(d.each).split(",").forEach(function(a){c.resolve(a,window,[g,f])}),g},style:a.createElement("style")};b.add("repeat",function(a){var b=d.parent(this),c=this.getAttribute(d.id)||d.init(this,!0),e="["+d.id+'="'+c+'"]',f=e+":not(x-repeat)";if(a===!1)return b.queryAll(f).remove();var g=b.query("x-repeat"+e),h=g.content||d[c];g.hasAttribute("x-repeat-first")&&(g=b.query(e+"[x-index]")||g);var i=Array.isArray(a)?a.map(function(a){return d.repeat(b,g,h,a)}):d.repeat(b,g,h,a);return b.queryAll(f).each("setAttribute","x-index","${i}"),i},[Element]),d.style.textContent="[x-repeat] { display: none }",a.head.appendChild(d.style),d.initAll(),a.addEventListener("DOMContentLoaded",function(){d.initAll(),d.style.textContent="\nx-repeat { display: none }\nx-repeat[x-repeat-none] { display: inline-block; }\n["+d.id+"] + x-repeat[x-repeat-none] { display: none; }"})}(document);